{"version":3,"file":"index.js","sourceRoot":"","sources":["../src/index.ts"],"names":[],"mappings":";;;;;AAAA,sDAA8B;AAC9B,gDAAwB;AACxB,oDAA4B;AAC5B,oDAA4B;AAC5B,2DAAuC;AACvC,yDAAsC;AACtC,iEAA8C;AAC9C,uEAAoD;AACpD,6DAA0C;AAC1C,kEAA0C;AAC1C,2DAA0D;AAE1D,OAAO,CAAC,GAAG,CAAC,kCAAkC,CAAC,CAAC;AAEhD,aAAa;AACb,gBAAM,CAAC,MAAM,EAAE,CAAC;AAEhB,MAAM,IAAI,GAAG,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC;AAE9C,8BAA8B;AAC9B,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,YAAY,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC;IACzD,OAAO,CAAC,KAAK,CAAC,sDAAsD,CAAC,CAAC;IACtE,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,gCAAgC;AACnD,CAAC;AAED,MAAM,GAAG,GAAG,IAAA,iBAAO,GAAE,CAAC;AAEtB,GAAG,CAAC,GAAG,CAAC,IAAA,cAAI,GAAE,CAAC,CAAC;AAEhB,GAAG,CAAC,GAAG,CAAC,2BAAa,CAAC,CAAC;AACvB,GAAG,CAAC,GAAG,CAAC,IAAA,gBAAM,EAAC,UAAU,EAAE;IACzB,MAAM,EAAE;QACN,KAAK,EAAE,CAAC,GAAW,EAAE,EAAE,CAAC,gBAAM,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;KAChD;CACF,CAAC,CAAC,CAAC;AACJ,GAAG,CAAC,GAAG,CAAC,iBAAO,CAAC,IAAI,EAAE,CAAC,CAAC;AAExB,OAAO,CAAC,GAAG,CAAC,2BAA2B,CAAC,CAAC;AAEzC,GAAG,CAAC,GAAG,CAAC,MAAM,EAAE,eAAS,CAAC,CAAC;AAC3B,GAAG,CAAC,GAAG,CAAC,MAAM,EAAE,cAAS,CAAC,CAAC;AAC3B,GAAG,CAAC,GAAG,CAAC,MAAM,EAAE,kBAAa,CAAC,CAAC;AAC/B,GAAG,CAAC,GAAG,CAAC,MAAM,EAAE,qBAAgB,CAAC,CAAC;AAClC,GAAG,CAAC,GAAG,CAAC,MAAM,EAAE,gBAAW,CAAC,CAAC;AAE7B,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE;IACxB,GAAG,CAAC,IAAI,CAAC,2BAA2B,CAAC,CAAC;AACxC,CAAC,CAAC,CAAC;AAEH,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE,SAAS,EAAE,GAAG,EAAE;IAC/B,OAAO,CAAC,GAAG,CAAC,yCAAyC,IAAI,EAAE,CAAC,CAAC;AAC/D,CAAC,CAAC,CAAC","sourcesContent":["import express from 'express';\r\nimport cors from 'cors';\r\nimport morgan from 'morgan';\r\nimport dotenv from 'dotenv';\r\nimport routeUser from './routes/users';\r\nimport routeAuth from './routes/auth';\r\nimport routeHaliSaha from './routes/haliSaha';\r\nimport routeReservation from './routes/reservation';\r\nimport routeReview from './routes/review';\r\nimport logger from './core/logger/logger';\r\nimport { globalLimiter } from './middlewares/rateLimiter';\r\n\r\nconsole.log(\"🚀 Starting Toplansın backend...\");\r\n\r\n// .env yükle\r\ndotenv.config();\r\n\r\nconst PORT = Number(process.env.PORT) || 5000;\r\n\r\n// kritik değişkenler kontrolü\r\nif (!process.env.DATABASE_URL || !process.env.JWT_SECRET) {\r\n  console.error(\"❌ Missing .env variables: DATABASE_URL or JWT_SECRET\");\r\n  process.exit(1); // railway deploy burada çakılır\r\n}\r\n\r\nconst app = express();\r\n\r\napp.use(cors());\r\n\r\napp.use(globalLimiter);\r\napp.use(morgan('combined', {\r\n  stream: {\r\n    write: (msg: string) => logger.info(msg.trim())\r\n  }\r\n}));\r\napp.use(express.json());\r\n\r\nconsole.log(\"✅ Middleware'ler yüklendi\");\r\n\r\napp.use('/api', routeUser);\r\napp.use('/api', routeAuth);\r\napp.use('/api', routeHaliSaha);\r\napp.use('/api', routeReservation);\r\napp.use('/api', routeReview);\r\n\r\napp.get('/', (req, res) => {\r\n  res.send('Toplansin backend runliyo');\r\n});\r\n\r\napp.listen(PORT, \"0.0.0.0\", () => {\r\n  console.log(`🎧 Server listening on http://0.0.0.0:${PORT}`);\r\n});\r\n"]}